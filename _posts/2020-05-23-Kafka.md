---
layout:     post
title:      "[Kafka]基础架构"
subtitle:   Kafka-0.11
date:       2020-05-20 00:00:00
author:     "Backspace"
header-img: "img/post-bg-apple-event-2015.jpg"
tags:
    - 大数据
    - Kafka
---

## Kafka是什么？

Kafka是一个**分布式**的基于**发布/订阅模式**的**消息队列**，分布式即集群。

------

## 消息队列

传统消息队列的应用场景就是**异步处理**，它具有异步通信，解耦合，可恢复性，缓冲，灵活性&峰值处理能力强的特点

消息队列包含两种模式：`点对点模式`，`发布/订阅模式`。

- 点对点模式，一对一，消费者主动拉取数据，消息收到后消息清除。

  ![](G:\Temp\github\backspace2019.github.io\img\in-post\2020-05\1V1.png)

- 发布/订阅模式，一对多，消费者消费数据之后不会清除消息。

  ![](G:\Temp\github\backspace2019.github.io\img\in-post\2020-05\1Vn.png)

------

## Kafka的架构

![](G:\Temp\github\backspace2019.github.io\img\in-post\2020-05\Kafka.png)

### 注意：

1. 多个分区可以存在到一台Kafka上
2. 一个Topice的每一个分区所对应的多个副本不可以存在到一台Kafka上
3. 一个Topic可以有多个分区也可以有多个副本
4. 一般Kafka认的是消费者组
5. 一个Topic中每一个分区的数据只能被一个消费者组中的一个消费者消费
6. 一个消费者组的消费者数要≤分区数
7. Kafka要把元数据存储到Zookeeper
8. 0.9版本之前offset存储到Zookeeper，但是既要连接Kafka又要连接ZK很消耗资源也影响效率，0.9版本之后offset存储到本地
9. Zookeeper是集群broker的注册中心